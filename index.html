

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Moira Documentation &mdash; Moira 2.5.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
        <script src="_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
        <script src="_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> Moira
          

          
          </a>

          
            
            
              <div class="version">
                2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="contacts.html">Contact Moira Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="gsoc.html">Google Summer of Code</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Moira</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>Moira Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="moira-documentation">
<h1>Moira Documentation<a class="headerlink" href="#moira-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#key-features">Key Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#limitations">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#microservices">Microservices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_notes/index.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_0.html">2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_1.html">2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_2.html">2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_3.html">2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_3.html#id4">2.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_4_0.html">2.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_5_0.html">2.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes/2_5_1.html">2.5.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation/manual.html">Manual Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/docker.html">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/packages.html">RPM and DEB Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/webhooks_scripts.html">Webhooks and Custom Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/feeding.html">Feeding Metrics to Moira</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation/security.html">Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_guide/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user_guide/simple.html">Simple Threshold Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/subscriptions.html">Setting Up Your Subscriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/efficient.html">Efficient Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/schedule.html">Schedules</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/trigger_page.html">Current State and Event History</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/throttling.html">Throttling</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/nodata.html">Dealing with NODATA</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/advanced.html">Advanced Mode Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/hidden_pages.html">Hidden Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/maintenance.html">Maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_guide/selfstate.html">Self State Monitor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development/architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/ui.html">UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/notifier.html">Backend</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contacts.html">Contact Moira Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="gsoc.html">Google Summer of Code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gsoc.html#about-moira">About Moira</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsoc.html#mentors">Mentors</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsoc.html#ideas">Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsoc.html#done-in-previous-years">Done in previous years</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Moira is a real-time alerting tool, based on <a class="reference external" href="https://github.com/graphite-project">Graphite</a> data.</p>
<div class="section" id="key-features">
<h2>Key Features<a class="headerlink" href="#key-features" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><strong>Graphite storage independence</strong></p>
<p>Some Graphite queries are <em>very</em> ineffective. Tools like <a class="reference external" href="https://github.com/scobal/seyren">Seyren</a>
multiply this effect every minute making lots of ineffective queries
and overloading your cluster. Moira relies on the incoming
metric stream, and has its own fast cache for recent data.</p>
</li>
<li><p><strong>Support for (almost) all Graphite functions</strong></p>
<p>Graphite function library (<a class="reference external" href="https://github.com/go-graphite/carbonapi/blob/ccac7217894801a5a6ceb8602a70ea0d79e975cf/cmd/carbonapi/COMPATIBILITY.md#functions">carbonapi</a>) is embedded directly into
Moira source code. You can use any function and get predictable results,
like in your Graphite or Grafana dashboards.</p>
</li>
<li><p><strong>Support for custom expressions</strong></p>
<p>If simple warning/error threshold is not enough, you can write flexible
<a class="reference external" href="https://github.com/Knetic/govaluate/blob/master/MANUAL.md">govaluate</a> expressions to calculate trigger state based on metric data.</p>
</li>
<li><p><strong>Tags for triggers and subscriptions</strong></p>
<p>When several teams/services share one monitoring tool, it is essential
to provide some way of filtering triggers and subscriptions in the UI.
Moira has a flexible tag system.</p>
</li>
<li><p><strong>Extendable notification channels</strong></p>
<p>Moira supports email, <a class="reference external" href="https://slack.com">Slack</a>, <a class="reference external" href="https://pushover.net">Pushover</a> and many other channels
of notification out-of-the-box. But you can always write your own plugin
in Go and rebuild Moira Notifier microservice.</p>
</li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Alarm_fatigue"><strong>Alarm fatigue</strong></a> <strong>protection</strong></p>
<p>Sometimes one of your triggers goes mad and switches back and forth
between states, sending you hundreds of notifications. Sometimes you
just ignore and delete all messages, accidentally also deleting one that
is actually important. Moira tries to protect you with a feature called
<em>throttling</em>. It’s simple: if one of your triggers starts to send over
10 messages per hour, Moira limits this trigger to one message
per 30 minutes. Alerts from this trigger are combined, and not lost -
just packaged into a single message.</p>
</li>
</ul>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>By default, Moira stores metric history for one hour. This ensures
performance under heavy load. You can tweak this in config file,
but note that performance will degrade.</p>
<p>In order to reduce database load, Moira checks every single trigger
at most once every 5 seconds. Probably, your metrics arrive once
every minute, so you really won’t notice this limitation. You can also
tweak this in config file.</p>
</div>
<div class="section" id="microservices">
<span id="microservices-architecture"></span><h2>Microservices<a class="headerlink" href="#microservices" title="Permalink to this headline">¶</a></h2>
<p>In spirit of Graphite architecture, Moira consists of several loosely
coupled microservices. You are welcome to replace or to add new ones.</p>
<div class="section" id="filter">
<h3>Filter<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h3>
<p>Filter is a lightweight service responsible for receiving lots of metric
data in Graphite format. It filters received data and saves only metrics
that match any of user triggers. This reduces load on all other parts of Moira.</p>
</div>
<div class="section" id="checker">
<h3>Checker<a class="headerlink" href="#checker" title="Permalink to this headline">¶</a></h3>
<p>Checker is an application with embedded Graphite functions. Checker watches
for incoming metric values and performs checks according to saved trigger
settings. When state of any trigger changes, Checker generates an event.</p>
</div>
<div class="section" id="notifier">
<h3>Notifier<a class="headerlink" href="#notifier" title="Permalink to this headline">¶</a></h3>
<p>Notifier is an application that watches for generated events. Notifier is
responsible for scheduling and sending notifications, observing quiet hours,
retrying failed notifications, etc.</p>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>API is an application that serves as a backend for UI.</p>
</div>
<div class="section" id="web-2-0">
<h3>Web 2.0<a class="headerlink" href="#web-2-0" title="Permalink to this headline">¶</a></h3>
<p>Web 2.0 is a frontend React application, it looks like this:</p>
<a class=""
               data-lightbox="group-9cc33f55-5f65-45ee-80d5-577e85443479"
               href="_images/triggers.png"
               title=""
               data-title=""
               ><img src="_images/triggers.png"
                     class=""
                     width="100%"
                     height="auto"
                     alt="ui screenshot"/>
                </a></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="overview.html" class="btn btn-neutral float-right" title="Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, SKB Kontur.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>