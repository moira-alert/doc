

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Maintenance &mdash; Moira 2.5.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
        <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Self State Monitor" href="selfstate.html" />
    <link rel="prev" title="Hidden Pages" href="hidden_pages.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Moira
          

          
          </a>

          
            
            
              <div class="version">
                2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="simple.html">Simple Threshold Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="subscriptions.html">Setting Up Your Subscriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="efficient.html">Efficient Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="schedule.html">Schedules</a></li>
<li class="toctree-l2"><a class="reference internal" href="trigger_page.html">Current State and Event History</a></li>
<li class="toctree-l2"><a class="reference internal" href="throttling.html">Throttling</a></li>
<li class="toctree-l2"><a class="reference internal" href="nodata.html">Dealing with NODATA</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">Advanced Mode Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="hidden_pages.html">Hidden Pages</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Maintenance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-1-maintenance-metric-alert-will-not-be-sent">Example 1. Maintenance metric, alert will not be sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-2-maintenance-metric-alert-will-be-sent">Example 2. Maintenance metric, alert will be sent</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-3-maintenance-trigger-alert-will-be-sent">Example 3. Maintenance trigger, alert will be sent</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="selfstate.html">Self State Monitor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contacts.html">Contact Moira Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gsoc.html">Google Summer of Code</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Moira</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">User Guide</a> &raquo;</li>
        
      <li>Maintenance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user_guide/maintenance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="maintenance">
<h1>Maintenance<a class="headerlink" href="#maintenance" title="Permalink to this headline">¶</a></h1>
<p>Maintenance is a proper way to mute alerting on specific metrics
or triggers. It can be useful during planned work. E.g., you are
going to move server from one data center to another and don’t want
Moira to disturb you.</p>
<a class=""
               data-lightbox="group-82fd991c-67ee-4011-b69d-3d788e04e998"
               href="../_images/maintenance1.png"
               title=""
               data-title=""
               ><img src="../_images/maintenance1.png"
                     class=""
                     width="100%"
                     height="auto"
                     alt="maintenance mode"/>
                </a><div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>When you switch a metric or trigger into maintenance, Moira will
mute all state changes during that period. You will receive notification
about every metric, if the state before and after maintenance turn out
to be different.</p>
<div class="section" id="example-1-maintenance-metric-alert-will-not-be-sent">
<h3>Example 1. Maintenance metric, alert will not be sent<a class="headerlink" href="#example-1-maintenance-metric-alert-will-not-be-sent" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>metric <code class="docutils literal notranslate"><span class="pre">awesomeMetric1</span></code> is in <code class="docutils literal notranslate"><span class="pre">OK</span></code> state;</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Rick</a> switches metric into maintenance for an hour;</p></li>
<li><p>within the hour metric changes its state several times:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> → <code class="docutils literal notranslate"><span class="pre">WARN</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WARN</span></code> → <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> → <code class="docutils literal notranslate"><span class="pre">OK</span></code>;</p></li>
</ul>
</li>
<li><p>after one-hour maintenance ends, metric is in <code class="docutils literal notranslate"><span class="pre">OK</span></code> state;</p></li>
<li><p>Moira checks if metric state changed during maintenance:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric1</span></code> state before maintenance: <code class="docutils literal notranslate"><span class="pre">OK</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric1</span></code> state after maintenance <code class="docutils literal notranslate"><span class="pre">OK</span></code>;</p></li>
</ul>
</li>
<li><p>nothing to notify about: the state remained the same as it was
before the maintenance period.</p></li>
</ul>
</div>
<div class="section" id="example-2-maintenance-metric-alert-will-be-sent">
<h3>Example 2. Maintenance metric, alert will be sent<a class="headerlink" href="#example-2-maintenance-metric-alert-will-be-sent" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>metric <code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> is in <code class="docutils literal notranslate"><span class="pre">OK</span></code> state;</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Rick</a> switches metric into maintenance for an hour;</p></li>
<li><p>within the hour metric changes its state several times:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> → <code class="docutils literal notranslate"><span class="pre">WARN</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WARN</span></code> → <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> → <code class="docutils literal notranslate"><span class="pre">OK</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> → <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>;</p></li>
</ul>
</li>
<li><p>after one-hour maintenance ends, metric is in <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> state;</p></li>
<li><p>Moira checks if metric state changed during maintenance:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> state before maintenance: <code class="docutils literal notranslate"><span class="pre">OK</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> state after maintenance <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>;</p></li>
</ul>
</li>
<li><p>Moira sends message to user: the state has changed from that which
was before the maintenance period.</p></li>
</ul>
</div>
<div class="section" id="example-3-maintenance-trigger-alert-will-be-sent">
<h3>Example 3. Maintenance trigger, alert will be sent<a class="headerlink" href="#example-3-maintenance-trigger-alert-will-be-sent" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>metric <code class="docutils literal notranslate"><span class="pre">awesomeMetric1</span></code> is in <code class="docutils literal notranslate"><span class="pre">WARN</span></code> state;</p></li>
<li><p>metric <code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> is in <code class="docutils literal notranslate"><span class="pre">OK</span></code> state;</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Rick</a> switches trigger with this metrics into maintenance for an hour;</p></li>
<li><p>within the hour metric <code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> changes its state several times:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> → <code class="docutils literal notranslate"><span class="pre">WARN</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WARN</span></code> → <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> → <code class="docutils literal notranslate"><span class="pre">OK</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> → <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>;</p></li>
</ul>
</li>
<li><p>after one-hour maintenance ends, metric is in <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> state;</p></li>
<li><p>Moira checks if metric state changed during maintenance:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric1</span></code> state before maintenance: <code class="docutils literal notranslate"><span class="pre">WARN</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric1</span></code> state after maintenance <code class="docutils literal notranslate"><span class="pre">WARN</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> state before maintenance: <code class="docutils literal notranslate"><span class="pre">OK</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> state after maintenance <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>;</p></li>
</ul>
</li>
<li><p>Moira sends message about <code class="docutils literal notranslate"><span class="pre">awesomeMetric2</span></code> metric to user: the state
has changed from that which was before the maintenance period.</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="selfstate.html" class="btn btn-neutral float-right" title="Self State Monitor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hidden_pages.html" class="btn btn-neutral float-left" title="Hidden Pages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, SKB Kontur.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>