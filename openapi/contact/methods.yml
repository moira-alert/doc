contacts:
  get:
    summary: "Gets all Moira contacts."
    operationId: GetContacts
    tags:
      - contact
    responses:
      $ref: ./responses.yml#/getContacts
  put:
    summary: "Creates a new contact notification for the current user."
    operationId: CreateNewContact
    tags:
      - contact
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./requests.yml#/newContact
    responses:
      $ref: ./responses.yml#/newContact
contact:
  put:
    summary: "Updates an existing notification contact to the values passed in the request body."
    operationId: UpdateContact
    tags:
      - contact
    parameters:
      - $ref: ../shared/parameters/_index.yml#/contactId
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./requests.yml#/updateContact
    responses:
      $ref: ./responses.yml#/updateContact
  delete:
    summary: "Deletes notification contact for the current user and remove the contact ID from all subscriptions."
    operationId: DeleteContact
    tags:
      - contact
    parameters:
      - $ref: ../shared/parameters/_index.yml#/contactId
    responses:
      $ref: ./responses.yml#/deleteContact

testContact:
  post:
    summary: "Push a test notification to verify that the contact is properly set up."
    operationId: TestContactNotification
    tags:
      - contact
    parameters:
      - $ref: ../shared/parameters/_index.yml#/contactId
    responses:
      $ref: ./responses.yml#/testContactNotification

teamContacts:
  post:
    summary: "Creates a new contact notification for the current team."
    operationId: CreateNewTeamContact
    tags:
      - teamContact
    parameters:
      - $ref: ../shared/parameters/_index.yml#/teamID
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ./requests.yml#/newContact
    responses:
    #Hardcode newContact responce, because I don't know why ref doesn't work in this place.
    #Use '$ref: /responses.yml#/newContact' leads to error atribute paths.'/team/{teamID}/contacts'(post).responses.$ref is not of type `object`
      newContact:
        200:
          description: "Contact created successfully."
          content:
            application/json:
            schema:
              $ref: "../shared/schemas/Contact.yml#/Contact"

        400:
          $ref: "../shared/responses/_index.yml#/BadRequest"
