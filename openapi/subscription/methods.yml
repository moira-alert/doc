subscriptions:
  get:
    summary: "get all subscriptions"
    operationId: GetSubscriptions
    tags:
      - subscription
    responses:
      $ref: ./responses.yml#/getSubscription
  put:
    summary: "create a new subscription"
    operationId: CreateSubscription
    tags:
      - subscription
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../shared/schemas/Subscription.yml#/Subscription"
    responses:
      $ref: ./responses.yml#/createSubscription
subscription:
  put:
    summary: "update a subscription"
    operationId: UpdateSubscription
    tags:
      - subscription
    parameters:
      - $ref: "../shared/parameters/_index.yml#/subscriptionId"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../shared/schemas/Subscription.yml#/Subscription"
    responses:
      $ref: ./responses.yml#/updateSubscription

  delete:
    summary: "deletes a subscription"
    operationId: DeleteSubscription
    tags:
      - subscription
    parameters:
      - $ref: "../shared/parameters/_index.yml#/subscriptionId"
    responses:
      $ref: ./responses.yml#/deleteSubscription

test:
  put:
    summary: "send test notification for a subscription"
    operationId: TestSubscriptionNotification
    tags:
      - subscription
    parameters:
      - $ref: "../shared/parameters/_index.yml#/subscriptionId"
    responses:
      $ref: ./responses.yml#/testSubscriptionNotification

teamSubscriptions:
  post:
    summary: "create a new subscription for team"
    operationId: CreateTeamSubscription
    tags:
      - teamSubscription
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../shared/schemas/Subscription.yml#/Subscription"
    parameters:
      - $ref: ../shared/parameters/_index.yml#/teamID
    responses:
    #Hardcode createSubscription responce, because I don't know why ref doesn't work in this place.
    #Use '$ref: /responses.yml#/createSubscription' leads to error: attribute paths.'/team/{teamID}/subscriptions'(post).responses.$ref is not of type`object`
      200:
        description: "subscription created"
        content:
          application/json:
            schema:
              $ref: "../shared/schemas/Subscription.yml#/Subscription"
      400:
        description: "Invalid request data"
        content:
          application/json:
            schema:
              $ref: "../shared/schemas/Errors.yml#/Error"
            examples:
              missingField:
                description: "a required field isn't in the request body"
                value:
                  status: "Invalid request"
                  message: "subscription must have tags"
          text/html:
            schema:
              type: string
